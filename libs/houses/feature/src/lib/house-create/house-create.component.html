<div class="house-create-container">
  <mat-toolbar class="page-toolbar">
    <button mat-icon-button (click)="goBack()">
      <mat-icon>arrow_back</mat-icon>
    </button>
    <span>{{ isEditMode ? 'Edit House' : 'Create New House' }}</span>
    <span class="spacer"></span>
    <button mat-button (click)="goBack()">
      <mat-icon>cancel</mat-icon>
      Cancel
    </button>
  </mat-toolbar>

  @if (loading && isEditMode) {
    <div class="loading-container">
      <lib-shared-loading-spinner 
        [message]="'Loading house details...'">
      </lib-shared-loading-spinner>
    </div>
  }

  @if (error && !loading) {
    <div class="error-container">
      <lib-shared-error-message 
        type="error"
        [title]="'Failed to Load House'"
        [message]="error"
        [showRetry]="true"
        (retry)="loadHouseForEdit(houseId!)">
      </lib-shared-error-message>
    </div>
  }

  @if (!loading || !isEditMode) {
    <div class="form-container">
      <lib-houses-house-form
        [house]="existingHouse"
        [isSubmitting]="isSubmitting"
        (formSubmit)="onCreateHouse($event)"
        (formCancel)="goBack()">
      </lib-houses-house-form>
    </div>
  }
</div>