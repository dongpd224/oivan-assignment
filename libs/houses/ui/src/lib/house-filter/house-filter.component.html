<div class="filter-container">
  <form [formGroup]="filterForm">
    <div class="row g-2 align-items-end">
      <div class="col-auto">
        <mat-form-field>
          <mat-label>Block Number</mat-label>
          <input matInput 
                 formControlName="blockNumber" 
                 [matAutocomplete]="blockAuto"
                 (input)="onBlockInput($event)"
                 placeholder="All Blocks">
          <mat-autocomplete #blockAuto="matAutocomplete" [displayWith]="displayBlockFn">
            @for (option of filteredBlockOptions(); track option.value) {
              <mat-option [value]="option.value">{{ option.label }}</mat-option>
            }
          </mat-autocomplete>
        </mat-form-field>
      </div>

      <div class="col-auto">
        <mat-form-field>
          <mat-label>Land Number</mat-label>
          <input matInput 
                 formControlName="landNumber" 
                 [matAutocomplete]="landAuto"
                 (input)="onLandInput($event)"
                 placeholder="All Lands">
          <mat-autocomplete #landAuto="matAutocomplete" [displayWith]="displayLandFn">
            @for (option of filteredLandOptions(); track option.value) {
              <mat-option [value]="option.value">{{ option.label }}</mat-option>
            }
          </mat-autocomplete>
        </mat-form-field>
      </div>

      <div class="col-auto">
        <mat-form-field>
          <mat-label>Min Price</mat-label>
          <input matInput formControlName="minPrice" placeholder="Min Price" libInputCurrency>
        </mat-form-field>
      </div>

      <div class="col-auto">
        <mat-form-field>
          <mat-label>Max Price</mat-label>
          <input matInput formControlName="maxPrice" placeholder="Max Price" libInputCurrency>
        </mat-form-field>
      </div>

      <div class="col-auto">
        <button mat-flat-button color="primary" type="button" (click)="applyFilter()" [disabled]="!hasChanges">
          <mat-icon>search</mat-icon> Apply
        </button>
      </div>

      <div class="col-auto">
        <button mat-stroked-button type="button" (click)="clearFilter()" [disabled]="!hasActiveFilters">
          <mat-icon>clear</mat-icon> Clear
        </button>
      </div>

      @if (showCreateButton()) {
        <div class="col-auto ms-auto">
          <button mat-flat-button color="accent" type="button" (click)="onCreateHouse()">
            <mat-icon>add</mat-icon> Create new house
          </button>
        </div>
      }
    </div>
  </form>
</div>
